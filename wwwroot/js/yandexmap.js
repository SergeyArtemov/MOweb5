var map = null;
var gpMoscowCenter = { lat: 55.755833, lng: 37.617778 };
var PolygonList = [];
var area = '[{"id":445,"parentid":0,"level":3,"name":"Хаб","rgbline":"000000","rgbfill":"004040","routenum":445,"latlngarr":[{"lat":55.7613079234348,"lng":37.7530851401389},{"lat":55.765947040649,"lng":37.7500339597464},{"lat":55.7653715642823,"lng":37.7469046600163},{"lat":55.7615033932188,"lng":37.7471066638827},{"lat":55.7570390073945,"lng":37.7461819723249},{"lat":55.7525183280884,"lng":37.7461833134294},{"lat":55.7504845645639,"lng":37.7444626763463},{"lat":55.7485417487037,"lng":37.7402380295098},{"lat":55.7516412445819,"lng":37.7365030534566},{"lat":55.7575931488613,"lng":37.7305416762829},{"lat":55.7589688261716,"lng":37.7293755859137},{"lat":55.7676849482875,"lng":37.7209943532944},{"lat":55.7744513579711,"lng":37.714365106076},{"lat":55.7789586191732,"lng":37.7099592424929},{"lat":55.779899990921,"lng":37.7084536850453},{"lat":55.7811869236537,"lng":37.7049061283469},{"lat":55.7820208279832,"lng":37.7013030834496},{"lat":55.7821143541438,"lng":37.6992332562804},{"lat":55.7821202113302,"lng":37.6991779357195},{"lat":55.7820432175997,"lng":37.6992112956941},{"lat":55.7815364722294,"lng":37.6994686201215},{"lat":55.7810720442991,"lng":37.70029457286},{"lat":55.7800283837923,"lng":37.7021072432399},{"lat":55.7780799597422,"lng":37.7030505426228},{"lat":55.7770583278002,"lng":37.7024498954416},{"lat":55.7761365400629,"lng":37.7010229602456},{"lat":55.7741609909191,"lng":37.697897516191},{"lat":55.7721672926749,"lng":37.6948201842606},{"lat":55.770642208333,"lng":37.6939851790667},{"lat":55.7693761887826,"lng":37.6921004243195},{"lat":55.7675120966372,"lng":37.688782196492},{"lat":55.7635594526626,"lng":37.6858019270003},{"lat":55.7624678728528,"lng":37.6854341290891},{"lat":55.7605476802916,"lng":37.6847823522985},{"lat":55.7590677013965,"lng":37.6811915449798},{"lat":55.7590128757771,"lng":37.6789042912424},{"lat":55.7589641943432,"lng":37.675919495523},{"lat":55.7591445516602,"lng":37.6727303490043},{"lat":55.7586040443641,"lng":37.6713862270117},{"lat":55.7576143236769,"lng":37.6709751784802},{"lat":55.7532455445384,"lng":37.6731817983091},{"lat":55.7515941611733,"lng":37.671820409596},{"lat":55.7487688631066,"lng":37.6674495823681},{"lat":55.7468888415665,"lng":37.669137865305},{"lat":55.7466275810589,"lng":37.6702414266765},{"lat":55.7392116076662,"lng":37.6718906499446},{"lat":55.7391293271624,"lng":37.6730594225228},{"lat":55.7387740057907,"lng":37.6731398887932},{"lat":55.7384987879095,"lng":37.6735321618617},{"lat":55.7370930656299,"lng":37.6763085834682},{"lat":55.7360753677681,"lng":37.6790271699429},{"lat":55.7343937433619,"lng":37.6837369613349},{"lat":55.7329445502018,"lng":37.6854855939746},{"lat":55.732409164608,"lng":37.6855124160648},{"lat":55.7323109782519,"lng":37.6855204626918},{"lat":55.7323193969376,"lng":37.6858892664314},{"lat":55.7320978619262,"lng":37.685920111835},{"lat":55.7321013618487,"lng":37.6857001706958},{"lat":55.7320927539307,"lng":37.6854748651386},{"lat":55.7329058626915,"lng":37.6853781379759},{"lat":55.7337307780116,"lng":37.6844477467239},{"lat":55.734362056732,"lng":37.6836246438325},{"lat":55.737032061258,"lng":37.6763518340886},{"lat":55.7375954731877,"lng":37.6751299202443},{"lat":55.7386989121704,"lng":37.6730753481388},{"lat":55.7390495054496,"lng":37.6729730889201},{"lat":55.7391318806979,"lng":37.6717711240054},{"lat":55.7465620529036,"lng":37.6701373234391},{"lat":55.7468243539751,"lng":37.6690905913711},{"lat":55.7486735546429,"lng":37.6672893203795},{"lat":55.7480114002003,"lng":37.6662283390761},{"lat":55.7482787028024,"lng":37.6647393777967},{"lat":55.7499568899572,"lng":37.6622174307704},{"lat":55.7503491719423,"lng":37.6574907079339},{"lat":55.7500122956549,"lng":37.6558914408088},{"lat":55.7511024292316,"lng":37.6559866592288},{"lat":55.7523892769449,"lng":37.6560709811747},{"lat":55.7561362181972,"lng":37.6574870198965},{"lat":55.7584068584724,"lng":37.6578068733216},{"lat":55.7617391277131,"lng":37.6574293524027},{"lat":55.7640567922963,"lng":37.6562610827387},{"lat":55.766351636351,"lng":37.6529014483094},{"lat":55.7676154863992,"lng":37.6511653885246},{"lat":55.7681566242993,"lng":37.6503831893206},{"lat":55.7686887768302,"lng":37.6496169157326},{"lat":55.7695473311086,"lng":37.6504440419376},{"lat":55.770142968561,"lng":37.6511070504785},{"lat":55.7704210807764,"lng":37.6512870937586},{"lat":55.7709490443556,"lng":37.651602588594},{"lat":55.7714770952503,"lng":37.6519286446273},{"lat":55.7719974848356,"lng":37.6521958597005},{"lat":55.7725270333727,"lng":37.6523931697011},{"lat":55.77285672188,"lng":37.6525053195656},{"lat":55.7731955733575,"lng":37.6525906473398},{"lat":55.7737687604496,"lng":37.6527752168477},{"lat":55.7753056273512,"lng":37.6523175649345},{"lat":55.7765945076585,"lng":37.6511357165873},{"lat":55.7779387110205,"lng":37.649898044765},{"lat":55.7794160810785,"lng":37.6484917290509},{"lat":55.7797042358506,"lng":37.6482176408172},{"lat":55.7809659506457,"lng":37.647498305887},{"lat":55.7825943570829,"lng":37.6465102471411},{"lat":55.7841657323658,"lng":37.6460215821862},{"lat":55.7857403501731,"lng":37.6455332525075},{"lat":55.7878712582453,"lng":37.6448893547058},{"lat":55.7901486377939,"lng":37.6442456245422},{"lat":55.7926042910528,"lng":37.6412091962993},{"lat":55.792453083973,"lng":37.6395923271776},{"lat":55.7922444531243,"lng":37.6376373320818},{"lat":55.7920810610468,"lng":37.6357338018716},{"lat":55.7919377854621,"lng":37.6328745670617},{"lat":55.7923224655151,"lng":37.6306161470711},{"lat":55.792537990457,"lng":37.6282075233758},{"lat":55.7927241418421,"lng":37.6246453821659},{"lat":55.7929211534459,"lng":37.6214587502182},{"lat":55.793086147533,"lng":37.6181033067405},{"lat":55.79315801938,"lng":37.6151273958385},{"lat":55.7930728309212,"lng":37.6120440289378},{"lat":55.7930240977497,"lng":37.6094099320471},{"lat":55.7928846978746,"lng":37.6061213761568},{"lat":55.7926694581945,"lng":37.6013411767781},{"lat":55.7923849886496,"lng":37.5969153642655},{"lat":55.7923826275059,"lng":37.5945711135865},{"lat":55.7924649841143,"lng":37.5919049978257},{"lat":55.792492845542,"lng":37.5902044773102},{"lat":55.7925389349107,"lng":37.5883859395981},{"lat":55.7894953133955,"lng":37.5878119468689},{"lat":55.7864272712205,"lng":37.5871412269771},{"lat":55.7803776593801,"lng":37.5853275507689},{"lat":55.7778055871726,"lng":37.5820869393647},{"lat":55.7767017470717,"lng":37.5842085666955},{"lat":55.776246520808,"lng":37.5850387103856},{"lat":55.7755555455425,"lng":37.5862443633378},{"lat":55.7696646071094,"lng":37.5964634120465},{"lat":55.7684734973917,"lng":37.594376988709},{"lat":55.7668892005714,"lng":37.5920650921762},{"lat":55.7642285251599,"lng":37.5885356403887},{"lat":55.7624274188768,"lng":37.5871630199254},{"lat":55.7595039404201,"lng":37.5849247165024},{"lat":55.7579338351181,"lng":37.5843426771462},{"lat":55.7527176238105,"lng":37.5836292095482},{"lat":55.7528133005206,"lng":37.5728360004723},{"lat":55.7530238451783,"lng":37.5714199617505},{"lat":55.7539762453258,"lng":37.564116306603},{"lat":55.7507475955289,"lng":37.5516681745648},{"lat":55.7473151945174,"lng":37.5450628995896},{"lat":55.7453972785921,"lng":37.5383835285902},{"lat":55.7450806899625,"lng":37.5361341610551},{"lat":55.7449910461185,"lng":37.5344800762832},{"lat":55.7452415377338,"lng":37.5339506752789},{"lat":55.7462457574394,"lng":37.5360205024481},{"lat":55.7461281270194,"lng":37.5364974327386},{"lat":55.7461224535175,"lng":37.5371299311519},{"lat":55.7464189874416,"lng":37.5377877429128},{"lat":55.7472814382002,"lng":37.5379144772887},{"lat":55.747650770429,"lng":37.5376636907458},{"lat":55.7477145002126,"lng":37.5364043936133},{"lat":55.7470518566427,"lng":37.5354874134064},{"lat":55.7466525441366,"lng":37.5355306640268},{"lat":55.7454889072571,"lng":37.5334346853197},{"lat":55.7452511829053,"lng":37.5333448313177},{"lat":55.7450420145319,"lng":37.5329829007387},{"lat":55.7453256019419,"lng":37.5269807875157},{"lat":55.7454306583062,"lng":37.5257744640112},{"lat":55.7458244989437,"lng":37.5247490219772},{"lat":55.7471139799575,"lng":37.5224575772882},{"lat":55.7582279156628,"lng":37.5150508247316},{"lat":55.7671603425695,"lng":37.4922577477992},{"lat":55.7668926973607,"lng":37.4920022673905},{"lat":55.7665949966029,"lng":37.4918349646032},{"lat":55.7676165259657,"lng":37.4889215826988},{"lat":55.7677277594303,"lng":37.4804075807333},{"lat":55.7668027258169,"lng":37.4780343286693},{"lat":55.7505458314611,"lng":37.4756127968431},{"lat":55.7422780872618,"lng":37.4642809666693},{"lat":55.7403169867847,"lng":37.4531150981784},{"lat":55.7421176054948,"lng":37.4455164000392},{"lat":55.7475521498011,"lng":37.4359035305679},{"lat":55.750266158635,"lng":37.4385161697865},{"lat":55.7556027591772,"lng":37.4564041569829},{"lat":55.7608314380834,"lng":37.4638511426747},{"lat":55.7678702738877,"lng":37.4609952606261},{"lat":55.7765604933334,"lng":37.4498139694333},{"lat":55.7740353188562,"lng":37.435557693243},{"lat":55.7766381593321,"lng":37.4050257727504},{"lat":55.7742482996916,"lng":37.399044111371},{"lat":55.7717106902762,"lng":37.3831572197378},{"lat":55.7735013497868,"lng":37.3695213720203},{"lat":55.784606979424,"lng":37.3703283816576},{"lat":55.7893687464597,"lng":37.3721169121564},{"lat":55.7924385393509,"lng":37.3579431138933},{"lat":55.7957772370543,"lng":37.3495546728373},{"lat":55.7941560892917,"lng":37.346401065588},{"lat":55.7980265782868,"lng":37.3355599120259},{"lat":55.7997816518649,"lng":37.3356620036066},{"lat":55.8014503428659,"lng":37.3228157311678},{"lat":55.803581898615,"lng":37.3127876222134},{"lat":55.803897160633,"lng":37.3077485896647},{"lat":55.8039224645712,"lng":37.3007354512811},{"lat":55.8033434912236,"lng":37.2952028922737},{"lat":55.801749287052,"lng":37.2879535518587},{"lat":55.8354827770533,"lng":37.2638056240976},{"lat":55.8765700449787,"lng":37.2882806137204},{"lat":55.8920335376014,"lng":37.2956161201},{"lat":55.891736797175,"lng":37.297082953155},{"lat":55.889871613665,"lng":37.3003912903369},{"lat":55.8889779441678,"lng":37.3019828461111},{"lat":55.888144644218,"lng":37.3040464706719},{"lat":55.8868499553332,"lng":37.3075584881008},{"lat":55.8861742352494,"lng":37.3093713261187},{"lat":55.8854714625235,"lng":37.3111679032445},{"lat":55.8848983244279,"lng":37.3127177171409},{"lat":55.8844700905976,"lng":37.3134727589786},{"lat":55.8838247629329,"lng":37.3144207522273},{"lat":55.8826517635077,"lng":37.3161715641618},{"lat":55.8815602362063,"lng":37.3180348612368},{"lat":55.8801339676211,"lng":37.3203720711172},{"lat":55.8766479819128,"lng":37.3262873478234},{"lat":55.8770611298558,"lng":37.3275230079889},{"lat":55.8734065398659,"lng":37.3337341658771},{"lat":55.8751683784734,"lng":37.3364906385541},{"lat":55.8783999664969,"lng":37.3306511342525},{"lat":55.8771161656537,"lng":37.3275221697986},{"lat":55.8767020758955,"lng":37.3263475298882},{"lat":55.8781095294884,"lng":37.3239498026669},{"lat":55.8806797552616,"lng":37.319626249373},{"lat":55.8815221678817,"lng":37.3182583227754},{"lat":55.8831706616113,"lng":37.3155010119081},{"lat":55.884632527927,"lng":37.3134308494627},{"lat":55.8849637132905,"lng":37.3127447068692},{"lat":55.8853250460047,"lng":37.311779614538},{"lat":55.8869272120358,"lng":37.3075757548213},{"lat":55.887944348075,"lng":37.3047775402665},{"lat":55.8890580229227,"lng":37.30204353109},{"lat":55.8904254598146,"lng":37.2995834425092},{"lat":55.8910981852076,"lng":37.2984292544425},{"lat":55.891780507654,"lng":37.2971399500966},{"lat":55.8921803997187,"lng":37.295097950846},{"lat":55.8927782989329,"lng":37.2911804169417},{"lat":55.8929308102655,"lng":37.2895358875394},{"lat":55.8932038973059,"lng":37.2884920053184},{"lat":55.8937982953331,"lng":37.2864044085145},{"lat":55.8975429810208,"lng":37.2849974222481},{"lat":55.9005363962431,"lng":37.2866863757372},{"lat":55.9003473720696,"lng":37.2942808829248},{"lat":55.9092822027345,"lng":37.3049538955093},{"lat":55.9107761305612,"lng":37.309261187911},{"lat":55.9117398179889,"lng":37.3133108206094},{"lat":55.9114264692101,"lng":37.3480673879385},{"lat":55.9166581566883,"lng":37.3675744235516},{"lat":55.914252636346,"lng":37.3684865422547},{"lat":55.9118469661165,"lng":37.3707719519735},{"lat":55.9138762277189,"lng":37.3859319649637},{"lat":55.9155656128005,"lng":37.3890059441328},{"lat":55.9141206395414,"lng":37.391379699111},{"lat":55.9164590439279,"lng":37.397780790925},{"lat":55.9187367760981,"lng":37.3948015272617},{"lat":55.9212072504425,"lng":37.3923372477293},{"lat":55.9458367899818,"lng":37.4098969995976},{"lat":55.9472791649723,"lng":37.419956792146},{"lat":55.9543777459739,"lng":37.4290840141475},{"lat":55.9610418049319,"lng":37.438554558903},{"lat":55.9612730354263,"lng":37.4402435123921},{"lat":55.9609024453384,"lng":37.4432630091906},{"lat":55.9600503849352,"lng":37.4459390155971},{"lat":55.9583754544258,"lng":37.4484034627676},{"lat":55.9592384603874,"lng":37.4505857750774},{"lat":55.9623847843096,"lng":37.4523754790425},{"lat":55.9626327442259,"lng":37.4538242071867},{"lat":55.9617734815468,"lng":37.456560395658},{"lat":55.9602400572232,"lng":37.4564641714096},{"lat":55.9600066576765,"lng":37.4579127319157},{"lat":55.9564247095135,"lng":37.4580426514149},{"lat":55.9555442416654,"lng":37.4668853916228},{"lat":55.9564075931544,"lng":37.4668899178505},{"lat":55.9573156901508,"lng":37.4643238820136},{"lat":55.9578798543852,"lng":37.4650282971561},{"lat":55.9587810517667,"lng":37.4665482714773},{"lat":55.9597304695215,"lng":37.4661798030138},{"lat":55.9609790837737,"lng":37.4666017480195},{"lat":55.9611219223648,"lng":37.4674563668668},{"lat":55.9609759806253,"lng":37.4684397317469},{"lat":55.9606866344473,"lng":37.4698846042156},{"lat":55.959699248945,"lng":37.4727456830442},{"lat":55.9598188649925,"lng":37.4749486148358},{"lat":55.9606839074174,"lng":37.4766937270761},{"lat":55.961643715984,"lng":37.4765792302788},{"lat":55.9626965910601,"lng":37.4761784076691},{"lat":55.9642789996382,"lng":37.477494366467},{"lat":55.9655243637507,"lng":37.4782093428076},{"lat":55.965223016594,"lng":37.4732878245413},{"lat":55.9668575968404,"lng":37.4729998223484},{"lat":55.9695490263504,"lng":37.4732821248472},{"lat":55.973872388357,"lng":37.4705851636827},{"lat":55.980518414857,"lng":37.4684053659439},{"lat":55.9876445166441,"lng":37.4663541465998},{"lat":55.9976553133938,"lng":37.4790337868035},{"lat":55.9987182896969,"lng":37.4868423677981},{"lat":56.0009162042309,"lng":37.4954859539867},{"lat":56.0012937365189,"lng":37.5021143630147},{"lat":55.9939271957584,"lng":37.5192141160369},{"lat":55.9961205925012,"lng":37.5309067033231},{"lat":55.9938620853097,"lng":37.5337166525424},{"lat":55.9900267634417,"lng":37.5472666695714},{"lat":55.9871288073329,"lng":37.5483053550124},{"lat":55.9842066686797,"lng":37.5486144796014},{"lat":55.9840751930702,"lng":37.5515414401889},{"lat":55.9854353189735,"lng":37.5608198717237},{"lat":55.985655126147,"lng":37.5622707791626},{"lat":55.9871542734614,"lng":37.5691868551076},{"lat":55.9879317810256,"lng":37.5749011337757},{"lat":55.9889565935745,"lng":37.5783821381629},{"lat":55.9891803272178,"lng":37.5797364860773},{"lat":55.9887305094541,"lng":37.5807473435998},{"lat":55.9857765411149,"lng":37.5839328020811},{"lat":55.986912109632,"lng":37.5871611759067},{"lat":55.9861232106924,"lng":37.589445412159},{"lat":55.9875863493397,"lng":37.5982388667762},{"lat":55.9850747347576,"lng":37.6030445471406},{"lat":55.9850692841493,"lng":37.6152806170285},{"lat":55.9844864405162,"lng":37.6280315034092},{"lat":55.9844736595831,"lng":37.6289883814752},{"lat":55.9838835705596,"lng":37.6301169209183},{"lat":55.9789499258998,"lng":37.6421586982906},{"lat":55.977792222027,"lng":37.6515650376678},{"lat":55.9763758038555,"lng":37.6561004854739},{"lat":55.9740449780954,"lng":37.6853551715613},{"lat":55.9749858417808,"lng":37.6999882981181},{"lat":55.9761661894687,"lng":37.7142464183271},{"lat":55.9867953028633,"lng":37.7184787765146},{"lat":55.9888469344849,"lng":37.7191677689553},{"lat":55.9895033808943,"lng":37.7212300524116},{"lat":55.9913026782591,"lng":37.725842949003},{"lat":55.9896723299342,"lng":37.7327482961118},{"lat":55.9856844462053,"lng":37.7340317331255},{"lat":55.9840833691934,"lng":37.7528204396367},{"lat":55.9905521120892,"lng":37.7755491435528},{"lat":55.9908888726814,"lng":37.7764766849577},{"lat":55.9902995397118,"lng":37.7774469740689},{"lat":55.9888693925415,"lng":37.7797535061837},{"lat":55.9880821311722,"lng":37.7808424830437},{"lat":55.987367117013,"lng":37.7818669192493},{"lat":55.9868053578444,"lng":37.7820814959705},{"lat":55.9862436844529,"lng":37.782188616693},{"lat":55.9858846113912,"lng":37.7820866927505},{"lat":55.9851766985804,"lng":37.7820275165141},{"lat":55.9834763578109,"lng":37.7819255925715},{"lat":55.9821850523504,"lng":37.7848275750875},{"lat":55.980772649171,"lng":37.78923695907},{"lat":55.9785746182265,"lng":37.7932227216661},{"lat":55.973946086902,"lng":37.7999763563276},{"lat":55.9726561539957,"lng":37.8041552379728},{"lat":55.9694529440392,"lng":37.8084412403405},{"lat":55.9689824004939,"lng":37.8107452578843},{"lat":55.9690719969406,"lng":37.8132490999997},{"lat":55.9695861618174,"lng":37.816775534302},{"lat":55.9689811782954,"lng":37.8176626749337},{"lat":55.9683722365703,"lng":37.8183788247407},{"lat":55.968265151335,"lng":37.819754127413},{"lat":55.9679053465248,"lng":37.8214298374951},{"lat":55.9662090382968,"lng":37.8220853023231},{"lat":55.9653191094534,"lng":37.824521753937},{"lat":55.965250189648,"lng":37.8245168924332},{"lat":55.9645494196077,"lng":37.8238683007658},{"lat":55.9628346277424,"lng":37.8220931813121},{"lat":55.9618191814887,"lng":37.8229047171772},{"lat":55.961564163836,"lng":37.8241472505033},{"lat":55.9615810898387,"lng":37.8256268240511},{"lat":55.9618508705114,"lng":37.8270849399269},{"lat":55.9630341594568,"lng":37.8289928287268},{"lat":55.9630721474701,"lng":37.8295926377178},{"lat":55.9630139430483,"lng":37.8302782773972},{"lat":55.9627149270239,"lng":37.8311892226339},{"lat":55.9622223917973,"lng":37.8323420695961},{"lat":55.9623436925805,"lng":37.8334090858698},{"lat":55.9627200046739,"lng":37.8342727571726},{"lat":55.9632047291043,"lng":37.8347714804113},{"lat":55.963918499412,"lng":37.8362785466015},{"lat":55.9642953602883,"lng":37.8386008366943},{"lat":55.9667419515096,"lng":37.8411970473826},{"lat":55.9659794358018,"lng":37.843621596694},{"lat":55.9643865660842,"lng":37.8466684184969},{"lat":55.9645757469025,"lng":37.8490876033902},{"lat":55.9652704048833,"lng":37.8552404232323},{"lat":55.9631048697882,"lng":37.8566360101104},{"lat":55.9610229979986,"lng":37.8569583781064},{"lat":55.9597235107205,"lng":37.8574736975133},{"lat":55.9596332342694,"lng":37.8592731244862},{"lat":55.9599251273647,"lng":37.8613959252835},{"lat":55.9597475844051,"lng":37.8638618811965},{"lat":55.9575026486415,"lng":37.8631898202002},{"lat":55.9567232100705,"lng":37.8672525286675},{"lat":55.9553177732805,"lng":37.8664014302194},{"lat":55.9534728716238,"lng":37.8756248764694},{"lat":55.952369800971,"lng":37.879088614136},{"lat":55.9522238260916,"lng":37.8794892691076},{"lat":55.9511636105116,"lng":37.8805908188224},{"lat":55.950464559592,"lng":37.8811772167683},{"lat":55.9471941272078,"lng":37.8788579441607},{"lat":55.9447422497715,"lng":37.8787275217474},{"lat":55.946474497024,"lng":37.8909144736827},{"lat":55.94279683601,"lng":37.8929957002401},{"lat":55.9437275498518,"lng":37.8979738801718},{"lat":55.9451321862235,"lng":37.8973945230246},{"lat":55.9470867009142,"lng":37.9028555005789},{"lat":55.94559558929,"lng":37.9073455184698},{"lat":55.943193753919,"lng":37.9100129753351},{"lat":55.9410807940617,"lng":37.9131095856428},{"lat":55.9399793446713,"lng":37.911614254117},{"lat":55.9368272398933,"lng":37.9036568105221},{"lat":55.9360314811322,"lng":37.8972694650292},{"lat":55.9353320617757,"lng":37.8967184387148},{"lat":55.9345117122456,"lng":37.8995696268976},{"lat":55.9340768766357,"lng":37.9035366140306},{"lat":55.9335166927431,"lng":37.9034117236734},{"lat":55.9315496328699,"lng":37.9030992463231},{"lat":55.9308473090085,"lng":37.9023361578584},{"lat":55.9305184932023,"lng":37.9008435085416},{"lat":55.9293307239269,"lng":37.901999540627},{"lat":55.9290620332303,"lng":37.9016548767686},{"lat":55.9289500390075,"lng":37.9010310955346},{"lat":55.9255443182788,"lng":37.9028010182083},{"lat":55.9224492055952,"lng":37.9063713736832},{"lat":55.9221623941258,"lng":37.9148672707379},{"lat":55.9133081243077,"lng":37.9167112894356},{"lat":55.9124523756974,"lng":37.9032003320754},{"lat":55.9113833458919,"lng":37.903698887676},{"lat":55.9108207610719,"lng":37.9017314873636},{"lat":55.9084985878335,"lng":37.9008368030191},{"lat":55.9092007534763,"lng":37.8954956866801},{"lat":55.9041829595804,"lng":37.8920661471784},{"lat":55.8885764173678,"lng":37.8832384943962},{"lat":55.8740614661379,"lng":37.8961045481265},{"lat":55.8652556486822,"lng":37.8799593262374},{"lat":55.8575205448954,"lng":37.8665687330067},{"lat":55.8549504768111,"lng":37.8598704189062},{"lat":55.8503682094691,"lng":37.8478009812534},{"lat":55.8463890150801,"lng":37.846074141562},{"lat":55.8432559592656,"lng":37.8399167954922},{"lat":55.8383960991396,"lng":37.8485867008567},{"lat":55.8281251017984,"lng":37.8474714048207},{"lat":55.8264974744529,"lng":37.8461091779173},{"lat":55.8183467027218,"lng":37.8400690108538},{"lat":55.8168991310285,"lng":37.8390769287944},{"lat":55.8136271951224,"lng":37.8394150547683},{"lat":55.8138027675873,"lng":37.8437655977905},{"lat":55.8115859652472,"lng":37.8470647148788},{"lat":55.8065310420313,"lng":37.8502429649234},{"lat":55.7967694790214,"lng":37.8498471714556},{"lat":55.7913821507494,"lng":37.8486359864474},{"lat":55.7878351757548,"lng":37.8418012149632},{"lat":55.7860122106448,"lng":37.7625945769251},{"lat":55.7639967754037,"lng":37.7690835110843}],"sessionid":""}]'
var aPoints = '[{"lat":55.7901383426126,"lng":37.6441121846438},{"lat":55.7844578193979,"lng":37.6456204243004},{"lat":55.782404378279,"lng":37.6463238336146},{"lat":55.7798189303021,"lng":37.6478956080973},{"lat":55.7776135063233,"lng":37.6500759087503},{"lat":55.7753233909658,"lng":37.6521702110767},{"lat":55.7738435028178,"lng":37.6526444591582},{"lat":55.7731278221972,"lng":37.6525214128196},{"lat":55.7720734590525,"lng":37.6521194167435},{"lat":55.7702429493286,"lng":37.6511435955763},{"lat":55.7687589928242,"lng":37.6495996490121},{"lat":55.7709708733735,"lng":37.6419833488763},{"lat":55.7720819636198,"lng":37.6385511271656},{"lat":55.7728705178986,"lng":37.6332041434944},{"lat":55.7730580865698,"lng":37.631657011807},{"lat":55.7732276062917,"lng":37.6301635242999},{"lat":55.7736391184785,"lng":37.626881338656},{"lat":55.773770461289,"lng":37.6235902681947},{"lat":55.7736479061768,"lng":37.6200953498483},{"lat":55.7766284274697,"lng":37.6202834397555},{"lat":55.7775982002826,"lng":37.6207933947444},{"lat":55.7779390889441,"lng":37.6192863285542},{"lat":55.7791507878424,"lng":37.6193242147565},{"lat":55.779885630544,"lng":37.6202480681241},{"lat":55.7808232008466,"lng":37.6216666214168},{"lat":55.7829742174314,"lng":37.6207660697401},{"lat":55.7846414590192,"lng":37.6196938566863},{"lat":55.788720698387,"lng":37.6198340021074},{"lat":55.7887918226878,"lng":37.6222270354629},{"lat":55.7907777720827,"lng":37.6222603954375},{"lat":55.7926971305854,"lng":37.6221971958876},{"lat":55.7923733718211,"lng":37.6280908472836},{"lat":55.7918648724366,"lng":37.6328509300947},{"lat":55.7919910534407,"lng":37.6356796547771},{"lat":55.792507862371,"lng":37.6411154866219},{"lat":55.6336330574259,"lng":37.7259473875165},{"lat":55.6410347495905,"lng":37.7267155051231},{"lat":55.6413967477019,"lng":37.7315605804324},{"lat":55.6406793851592,"lng":37.7379663661123},{"lat":55.6401096385767,"lng":37.7449488267303},{"lat":55.6441814987781,"lng":37.7624948322773},{"lat":55.6467997722311,"lng":37.7728127874434},{"lat":55.648204492878,"lng":37.7824440971017},{"lat":55.6459360401432,"lng":37.7845342084765},{"lat":55.6424053564623,"lng":37.7831909246743},{"lat":55.6318329153297,"lng":37.7850154973567},{"lat":55.6233946024876,"lng":37.7923330664635},{"lat":55.6125497237942,"lng":37.7727857977152},{"lat":55.6151507656504,"lng":37.7608638815582},{"lat":55.6141681132761,"lng":37.7447320707142},{"lat":55.6136768252546,"lng":37.7365588769317},{"lat":55.6131126618594,"lng":37.7317329123616},{"lat":55.6167945681377,"lng":37.7298531867564},{"lat":55.6175613233929,"lng":37.7295485883951},{"lat":55.6184010179152,"lng":37.7295442298055},{"lat":55.6215495929363,"lng":37.7301792427898},{"lat":55.6231177143285,"lng":37.7307007648051},{"lat":55.6247040794844,"lng":37.7321682684124},{"lat":55.6257626321785,"lng":37.733705509454},{"lat":55.626200841826,"lng":37.73467797786},{"lat":55.6308963951192,"lng":37.7346340566874},{"lat":55.6317252759223,"lng":37.7291368693113},{"lat":55.6336140910261,"lng":37.7272309921682}]';
var obj = JSON.parse(area)[0];
var points = [];

function yandex_initialize() {
    ymaps.ready(function () {
        map = new ymaps.Map("map",
            {
                center: [gpMoscowCenter.lat, gpMoscowCenter.lng]
                , zoom: 10
                , behaviors: ["drag", "scrollZoom"]
                , controls: []
            },
            {
                autoFitToViewport: "none"//"always"
                , minZoom: 3
                , maxZoom: 19
                , suppressMapOpenBlock: true
            }
        );
        map.controls.add("typeSelector", { position: { right: 5, top: 5 } });
        map.controls.add("zoomControl", { position: { left: 5, top: 40 } });
        //map.events.add(["click"], yandex_MapClick);
    });
}

function btn_click() {
    for (var m = 0; m < obj.latlngarr.length; m++) {
        var point = [];
        point.push(obj.latlngarr[m].lat);
        point.push(obj.latlngarr[m].lng);
        points.push(point);
    }
    yandex_CreatePolygonNew(points, obj.rgbline, obj.rgbfill, obj.name, obj.name, obj.id, 0, obj.parentid, "", obj.level, obj.routenum, obj.sessionid);
    var json = JSON.parse(aPoints);
}

function yandex_CreatePolygonNew(aPts, aBorderColor, aFillColor, aShortDescr, aFullDescr, aID, aRecordState, aParentID, aName, aLevel, aRouteNum, aSessionID) {
    try {
        var res = -1;
        if (aPts.length == 0) return res
        var polygon = new ymaps.Polygon([aPts],
            { hintContent: aShortDescr },
            {
                fill: true,
                stroke: true,
                strokeWidth: 1,
                strokeColor: aBorderColor,
                fillColor: aFillColor,
                opacity: 0.66,
                zIndex: -1
            });

        var ind = PolygonList.length;
        var md =
        {
            _index: ind ? ind : 0
            , ID: aID ? aID : 0
            , RecordState: aRecordState ? aRecordState : 0
            , ParentID: aParentID ? aParentID : 0
            , Name: aName ? aName : aFullDescr
            , Level: aLevel ? aLevel : 3
            , RouteNum: aRouteNum ? aRouteNum : aID ? aID : 0
            , LineColor: aBorderColor ? aBorderColor : "FF0000"
            , FillColor: aFillColor ? aFillColor : "FFFF00"
            , SessionID: aSessionID ? aSessionID : "index_" + PolygonList.length
        };
        polygon.id = md.ID;
        polygon.name = aShortDescr;
        polygon.description = aFullDescr;
        polygon.metaDataProperty = md;

        if (map && polygon) {
            map.geoObjects.add(polygon);
            //polygon.events.add("click", yandex_PolygonClick);
        }
        if (polygon) {
            PolygonList.push(polygon);
            polygon.metaDataProperty._index = PolygonList.length - 1;
            res = polygon.metaDataProperty._index;
            polygon.properties.set("hintContent", "sss");
            var bbb = 3;
        }
    }
    catch (e) {
        SendMessage('ERROR|' + getFnName(arguments.callee) + ': ' + e.message)
    }
    finally { return res; }
}

function SetValueOf(aName, aValue) { if (typeof this[aName] != "undefined") { this[aName].value = aValue; SendMessage(aName); } else { } }

function yandex2_CreateNewArea(lat, lng, num, dist, clrBord, clrFill, Descr, SessionID) {
    //SetValueOf("forDebug", document.getElementById("forDebug").value + " | " + "yandex2_CreateNewArea");

    var ind = -1;
    var pts = [];
    var minLat = lat;
    var maxLat = lat;
    var minLon = lng;
    var maxLon = lng;
    var llat = 0;
    var llng = 0;
    for (i = 0; i < num; i++) {
        angle = (360 / num) * i * Math.PI / 180;
        delta = [Math.cos(angle), Math.sin(angle)];
        pt = ymaps.coordSystem.geo.solveDirectProblem([lat, lng], delta, dist).endPoint;
        llat = pt[0];
        llng = pt[1];
        if (llat > maxLat) { maxLat = llat };
        if (llat < minLat) { minLat = llat };
        if (llng > maxLon) { maxLon = llng };
        if (llng < minLon) { minLon = llng };
        pts.push(pt);
    }
    ind = yandex_CreatePolygonNew(pts, clrBord, clrFill, Descr, Descr, "0", "1", "0", Descr, "3", "0", "1111111", SessionID);
    if (ind > -1) {
        //var xml = yandex_PolygonAbout(PolygonList[ind]);
        //SetValueOf("AreaXML", xml);
        PolygonList[ind].editor.startEditing();
        map.setBounds([[minLat, minLon], [maxLat, maxLon]]);
    }
    //event.preventMapEvent();
}